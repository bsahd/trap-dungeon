# ミニゲーム開発プロジェクト

## 選択されたゲーム案：Trap Dungeon

### コンセプト

マインスイーパをベースにした、ミニマルなローグライトゲーム。
プレイヤーは自動生成されるダンジョン（グリッド）を探索し、各マスに表示される数字（隣接する罠の数）をヒントに、罠を避けながら出口を目指す。

### コアメカニクス

- **盤面**: 8x8からスタートするグリッド状のマップ。
- **罠**: 盤面にランダムに配置される。踏むとゲームオーバー。
- **数字ヒント**: 罠ではない各マスに、隣接8マスに含まれる罠の数を表示する。
- **プレイヤー**: 盤面を移動し、安全なマスを開けていく。

### ローグライト要素

- **ステージの自動生成**:
  プレイするたびに、ダンジョンの広さ、罠の配置、出口の場所がランダムに変わる。
- **ラン中の成長**:
  フロアをクリアするごとに、攻略に役立つスキル（例：罠を1つ可視化、一度だけ罠を無効化）を選択して獲得する。
- **永続的な成長（メタ要素）**:
  ゲームオーバー時に得られる経験値で、新しいスキルをアンロックするなど、次回のプレイが有利になる要素を導入予定。

### 技術仕様

- **言語**: JavaScript
- **実行環境**: WebブラウザのコンソールおよびNode.js環境

---

## UIメッセージング仕様

`core.js`の`game.gameLoop()`は、UIに表示すべきメッセージを以下のプロパティに格納したオブジェクトを返します。UI側(e.g.,
`browser_io.js`)は、これらのプロパティを解釈して適切な方法でメッセージを表示します。

- **`lastActionMessage`**: `string`
  - **目的:** プレイヤーの直前の行動の結果（「罠が発動した」など）を通知します。
  - **UIでの扱い:**
    短時間表示されるポップアップ通知など、一時的なフィードバックとして表示するのが望ましいです。

- **`message`**: `string`
  - **目的:** ゲームの重要な状態変化（「GAME
    OVER」など）や、プレイヤーに次の行動を促すプロンプト（「ジャンプ方向を選んで」など）を示します。
  - **UIでの扱い:**
    内容に応じて、一時的なポップアップで表示するか、操作が完了するまで永続的に表示するかを判断する必要があります。

- **`prompt`**: `string`
  - **目的:**
    毎ターン表示される、基本的な操作案内（「w,a,s,dで移動...」など）です。
  - **UIでの扱い:**
    コンソール版では常に表示されることを想定していますが、GUI版では冗長なため通常は表示しません。
